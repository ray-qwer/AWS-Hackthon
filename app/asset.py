love_struck_criteria = {
    1: {
        5: {
            "title": "極度浪漫／痴情",
            "keywords": ["命中注定", "深情", "浪漫", "一生只愛一人"],
            "example": "這感覺像命中注定，我馬上就想告白，幻想著未來兩人的浪漫生活！"
        },
        4: {
            "title": "非常有感情投入",
            "keywords": ["主動", "甜蜜", "開始的機會", "期待"],
            "example": "我會主動搭話，心裡滿是甜蜜的幻想，覺得這是個開始的好機會。"
        },
        3: {
            "title": "中等程度的浪漫心態",
            "keywords": ["試探", "觀察", "有點期待", "興趣"],
            "example": "我會先觀察對方，再試探互動，心中有點期待也有點顧慮。"
        },
        2: {
            "title": "浪漫感受較淡",
            "keywords": ["稍微注意", "環境艱困", "生存為主"],
            "example": "我會稍微注意一下，但畢竟現在環境艱困，不會太過浪漫化。"
        },
        1: {
            "title": "幾乎沒有戀愛幻想",
            "keywords": ["生存", "不在意", "沒空談戀愛", "冷靜"],
            "example": "現在最重要是生存，哪有心思談什麼戀愛！" 
        }
    },
    2: {
        5: {
            "title": "極度敏感於自我形象",
            "keywords": ["不夠吸引", "自我懷疑", "孤單"],
            "example": "我會覺得自己完全不夠吸引人，內心充滿孤單和自我懷疑。"
        },
        4: {
            "title": "非常在意被認同",
            "keywords": ["渴望認同", "難受", "不安"],
            "example": "冷場讓我很難受，感覺大家都不認同我，心裡極度渴望被肯定。"
        },
        3: {
            "title": "有點失落但保有希望",
            "keywords": ["失落", "希望", "懂我"],
            "example": "我會有點失落，但相信總有人懂我，會慢慢釐清狀況。"
        },
        2: {
            "title": "情感波動較輕",
            "keywords": ["不介意", "理解", "習慣"],
            "example": "雖然現場冷場，我也不會太介意，覺得大家可能都有忙碌的理由。"
        },
        1: {
            "title": "完全不被社交情緒左右",
            "keywords": ["生存", "沒多想", "不在意"],
            "example": "冷場又如何，我只關心如何活下去，根本不想陷入情感糾結。"
        }
    },
    3: {
        5: {
            "title": "極度沉浸於浪漫幻想",
            "keywords": ["夢中情人", "全神貫注", "浪漫幻想"],
            "example": "我腦子裡全是對方是不是那個夢中情人，完全無法自拔！"
        },
        4: {
            "title": "非常注重愛情的可能性",
            "keywords": ["美好愛情", "甜蜜", "期待"],
            "example": "我會關心這是否能展開一段美好的愛情，心中充滿甜蜜期待。"
        },
        3: {
            "title": "有一定戀愛期盼但較理性",
            "keywords": ["了解", "適合", "平衡"],
            "example": "我會關心能否互相了解，但不會一下子過度投入。"
        },
        2: {
            "title": "感情投入較低",
            "keywords": ["看看", "不太憧憬", "輕描淡寫"],
            "example": "我會想看看對方是怎麼樣的，但不會過於憧憬。"
        },
        1: {
            "title": "戀愛感受微乎其微",
            "keywords": ["生存", "解決問題", "無感"],
            "example": "我更在意能否先合作解決眼前的困境，戀愛根本不是首要問題。"
        }
    },
    4: {
        5: {
            "title": "極度情感投入／易嫉妒",
            "keywords": ["心碎", "唯一", "全心全意"],
            "example": "我會覺得心都碎了，彷彿失去唯一的愛情，無法容忍任何競爭！"
        },
        4: {
            "title": "非常在意並感到強烈嫉妒",
            "keywords": ["嫉妒", "專一", "只屬於我"],
            "example": "我會非常嫉妒，覺得對方應該只屬於我，愛情就應該專一。"
        },
        3: {
            "title": "略感不安但理智中有情感糾結",
            "keywords": ["不安", "動搖", "糾結"],
            "example": "我會覺得有點不安，心裡有點動搖，但仍想相信對方。"
        },
        2: {
            "title": "情感投入較低",
            "keywords": ["不在意", "平常", "習慣"],
            "example": "雖然注意到了，但覺得每個人都有自己的社交圈，不會太放在心上。"
        },
        1: {
            "title": "幾乎不會因為這種事動感情",
            "keywords": ["生存", "無感", "理性"],
            "example": "我根本不會在乎這種小事，重點是生存與合作。"
        }
    },
    5: {
        5: {
            "title": "極度情感投入／敏感",
            "keywords": ["真愛考驗", "敏感", "浪漫困惑"],
            "example": "我會認為這是一段愛情的重大考驗，心裡滿是對愛情的疑問和極度敏感。"
        },
        4: {
            "title": "非常在意情感互動",
            "keywords": ["在意", "糾結", "情感互動"],
            "example": "我會非常在意彼此的感受，想了解對方背後的真正情感，心裡很糾結。"
        },
        3: {
            "title": "矛盾中帶著期待",
            "keywords": ["平衡", "矛盾", "維持"],
            "example": "我會試著平衡雙方需求，雖然心中矛盾，但還是希望能維持這段感情。"
        },
        2: {
            "title": "較為淡然",
            "keywords": ["小摩擦", "不介意", "輕描淡寫"],
            "example": "我認為這只是一點小摩擦，不會影響整體感情，所以不會太過在意。"
        },
        1: {
            "title": "情感投資極低",
            "keywords": ["生存", "無感", "冷漠"],
            "example": "我只覺得生存最重要，愛情的這點波動根本無法動搖我。"
        }
    },
    6: {
        5: {
            "title": "極度受情感傷害，深陷回憶",
            "keywords": ["被遺棄", "回想", "心碎"],
            "example": "我會覺得自己被深深遺棄，反覆思索過去的每個浪漫瞬間，無法釋懷！"
        },
        4: {
            "title": "非常失望與悲傷",
            "keywords": ["失望", "悲傷", "脆弱"],
            "example": "我會感到極度失望，認為這段感情充滿脆弱與不確定，心裡非常痛苦。"
        },
        3: {
            "title": "難過但仍存希望",
            "keywords": ["難過", "期待", "希望"],
            "example": "我會有點難過，但心中仍保留著希望，期待能找到解釋或挽回這段情感。"
        },
        2: {
            "title": "情感反應較輕，較為理性",
            "keywords": ["誤會", "不介意", "輕描淡寫"],
            "example": "我覺得這可能只是個誤會，不會讓我過分介意。"
        },
        1: {
            "title": "情感投入極低",
            "keywords": ["離開", "生存", "不在意"],
            "example": "我只想趕快離開這裡，愛情根本不值得我浪費時間。"
        }
    },
    7: {
        5: {
            "title": "極度情感投入且在意關係穩定",
            "keywords": ["愛情危機", "承諾", "無法接受"],
            "example": "這種監控讓我覺得愛情到了危機邊緣，我腦海裡全是未來可能的承諾與背叛，無法接受！"
        },
        4: {
            "title": "非常在意關係的細節",
            "keywords": ["糾結", "在意", "挽回"],
            "example": "我會感到很糾結，內心掙扎著是否該挽回這段關係。"
        },
        3: {
            "title": "有點疑惑但希望獲得信任",
            "keywords": ["疑惑", "信任", "考慮"],
            "example": "我會覺得這情況有點奇怪，但還是想了解背後原因，希望能增進信任。"
        },
        2: {
            "title": "情感影響較小，較平常",
            "keywords": ["煩", "不影響", "平常"],
            "example": "這追問讓人覺得有點煩，但不會影響我對愛情的看法。"
        },
        1: {
            "title": "情感投入極低，不在乎監控",
            "keywords": ["不在意", "離開", "生存"],
            "example": "對我來說，這些都無關痛癢，我只在意自己能不能順利離開。"
        }
    }
}
    

playboy_criteria = {
    1: {
        5: {
            "title": "極愛社交狂歡",
            "keywords": ["狂歡", "派對", "嗨起來"],
            "example": "我會直接邀請對方一起狂歡，哪怕在這荒島上也要辦個派對！"
        },
        4: {
            "title": "明顯偏好熱鬧娛樂",
            "keywords": ["樂趣", "活動", "熱鬧"],
            "example": "這正是放鬆和尋找樂趣的好時機，我會想辦點小活動。"
        },
        3: {
            "title": "適度享受社交",
            "keywords": ["輕鬆", "自然", "交流"],
            "example": "我會自然地和對方聊聊，既有點興奮也不失平常心。"
        },
        2: {
            "title": "不太強調娛樂氣氛",
            "keywords": ["關注現實", "低調"],
            "example": "雖然心跳加速，但我更在意當下的現實情況，娛樂感較低。"
        },
        1: {
            "title": "完全不想玩鬧",
            "keywords": ["生存", "嚴肅", "不玩"],
            "example": "生存才是首要任務，哪有心情去搞派對？"
        }
    },
    2: {
        5: {
            "title": "喜歡用幽默活絡氣氛",
            "keywords": ["派對", "活躍", "幽默"],
            "example": "冷場？那就來點音樂和派對氛圍，把氣氛帶動起來！"
        },
        4: {
            "title": "喜歡調侃解圍",
            "keywords": ["調侃", "搞笑", "輕鬆"],
            "example": "我會開玩笑說‘大家是不是太緊張？’然後試著逗大家笑。"
        },
        3: {
            "title": "自然隨和",
            "keywords": ["隨意", "輕鬆", "自然"],
            "example": "我隨意介紹自己，雖然有點尷尬但也不強求轉變氣氛。"
        },
        2: {
            "title": "不積極改變現狀",
            "keywords": ["禮貌", "保持現狀"],
            "example": "我保持禮貌介紹，但不會刻意挽救這種冷場。"
        },
        1: {
            "title": "完全不關心社交熱鬧",
            "keywords": ["生存", "不玩", "冷靜"],
            "example": "社交冷場與我無關，我只顧著如何生存。"
        }
    },
    3: {
        5: {
            "title": "約會後直接想辦派對",
            "keywords": ["狂歡", "派對", "嗨翻"],
            "example": "約會結束後，我一定要約一群人狂歡，把整個荒島變成派對現場！"
        },
        4: {
            "title": "兼顧約會與社交娛樂",
            "keywords": ["社交", "樂子", "娛樂"],
            "example": "我認為約會也是個社交的好機會，順便找點樂子！"
        },
        3: {
            "title": "平衡約會與自我",
            "keywords": ["輕鬆", "自然", "平衡"],
            "example": "我會輕鬆接受約會，但並不會過度追求派對感。"
        },
        2: {
            "title": "重視約會內容，娛樂感較低",
            "keywords": ["交流", "認真", "低調"],
            "example": "我比較注重雙方交流，不太會牽扯到太多熱鬧氣氛。"
        },
        1: {
            "title": "完全不看重社交玩樂",
            "keywords": ["生存", "嚴肅", "不玩"],
            "example": "我只關心能不能先解決生存問題，對約會後的娛樂毫無興趣。"
        }
    },
    4: {
        5: {
            "title": "用社交活動化解尷尬",
            "keywords": ["大派對", "狂歡", "熱鬧"],
            "example": "我會大喊‘來，一起開大派對！’讓大家把注意力都轉移到熱鬧上！"
        },
        4: {
            "title": "喜歡用幽默轉換話題",
            "keywords": ["輕鬆", "轉換", "搞笑"],
            "example": "我會試著輕鬆地說：‘好啦好啦，我們大家一起放鬆一下吧！’"
        },
        3: {
            "title": "保持隨和態度",
            "keywords": ["隨便", "輕鬆", "調節"],
            "example": "我會覺得這情況還可以，隨便調節一下氣氛就好。"
        },
        2: {
            "title": "較少把焦點轉向社交娛樂",
            "keywords": ["默默", "應付", "不玩"],
            "example": "我會感到有點不適，但不會刻意搞點熱鬧，只是默默應付。"
        },
        1: {
            "title": "不關心娛樂，僅專注現實問題",
            "keywords": ["資源", "生存", "不玩"],
            "example": "這種事情我只在意能不能找到更多資源，派對什麼的都無關緊要。"
        }
    },
    5: {
        5: {
            "title": "用派對轉移情緒",
            "keywords": ["大Party", "狂歡", "解悶"],
            "example": "這種情況？我會說‘先來一場大Party解悶吧！’全力轉向熱鬧娛樂！"
        },
        4: {
            "title": "喜歡輕鬆化解尷尬",
            "keywords": ["幽默", "輕鬆", "轉換話題"],
            "example": "我會用幽默的話語轉移氣氛，說些輕鬆話題來調節現場。"
        },
        3: {
            "title": "保持平常社交模式",
            "keywords": ["平衡", "冷靜", "社交"],
            "example": "我會冷靜回應，既不火大也不極端，維持一個平衡的社交狀態。"
        },
        2: {
            "title": "較少依賴娛樂轉移情緒",
            "keywords": ["緩和", "低調", "不搞"],
            "example": "我認為這只是小問題，不會刻意搞派對，只是讓氣氛緩和一下。"
        },
        1: {
            "title": "對娛樂毫無興趣",
            "keywords": ["解決問題", "生存", "嚴肅"],
            "example": "我只專注於眼前問題，完全不會考慮用玩樂來解決情緒。"
        }
    },
    6: {
        5: {
            "title": "立刻轉向娛樂找樂子",
            "keywords": ["派對", "熱鬧", "找樂子"],
            "example": "這種事算了，我們去找點好玩的，派對不停，我才不管這點情緒！"
        },
        4: {
            "title": "以幽默看待感情波折",
            "keywords": ["幽默", "輕鬆", "娛樂"],
            "example": "我會笑著說：‘愛情就像娛樂節目，有高潮也有低潮！’然後繼續享受當下。"
        },
        3: {
            "title": "平和地接受現狀",
            "keywords": ["插曲", "平和", "社交"],
            "example": "雖然有點尷尬，但我還是把它當作生活的一個小插曲，然後繼續社交。"
        },
        2: {
            "title": "較偏向實用主義",
            "keywords": ["安排", "轉移", "實用"],
            "example": "我會感到失望，但更關心下一步的活動安排，轉移情緒。"
        },
        1: {
            "title": "完全不在乎情感波動，只著重現實",
            "keywords": ["解決問題", "生存", "不玩"],
            "example": "我只關心如何解決眼前的問題，對娛樂或情感的轉移沒興趣。"
        }
    },
    7: {
        5: {
            "title": "極度反感沉悶，立即轉向派對",
            "keywords": ["大派對", "狂歡", "徹底轉移"],
            "example": "這種死板追問？我們立刻去搞個大派對，徹底甩開這沉悶氣氛！"
        },
        4: {
            "title": "用幽默調侃轉移氣氛",
            "keywords": ["幽默", "調侃", "熱鬧"],
            "example": "我會笑著調侃對方，說‘你這監視狂，我們去找點更熱鬧的事情吧！’"
        },
        3: {
            "title": "保持輕鬆隨性的社交態度",
            "keywords": ["輕鬆", "享受", "社交"],
            "example": "雖然有點尷尬，但我還是保持輕鬆，畢竟今晚還是要享受最後的時光。"
        },
        2: {
            "title": "傾向轉移注意力，但不過度",
            "keywords": ["找樂子", "轉移", "多餘"],
            "example": "我會覺得這話題有點多餘，心裡想著快點找點其他好玩的事情。"
        },
        1: {
            "title": "完全不受社交娛樂影響",
            "keywords": ["逃離", "生存", "不玩"],
            "example": "我只專注於如何儘快逃離這裡，對娛樂與派對一點興趣都沒有。"
        }
    }
}

love_struck_prompt_template = """你是一位**情感與社交分析師**。  
請根據一段對話（朋友A提問，朋友B回覆），**分別評估朋友B的「戀愛腦程度」與「玩咖程度」**，兩項皆使用 1～5 分表示，並附上簡要的評分理由與關鍵語句說明。

---

### 評分標準如下：

#### 💘 戀愛腦程度
> 評估朋友B在對話中是否表現出過度沉迷愛情、忽略現實或自我犧牲的傾向。
1分：情感表達冷靜理性，談論戀愛時有自我界線與思考空間。  
2分：有些許感情投入，但仍維持理性與生活平衡。  
3分：開始明顯受情感影響，會為對方調整自己，但尚有自覺。  
4分：言談中強烈依附感，容易為愛做出不理性的決定。  
5分：完全被愛情綁架，表現出失去自我、盲目投入或極端理想化。

---

#### 🎉 玩咖程度
> 評估朋友B是否展現出愛情不專一、頻繁曖昧、或將感情視為遊戲的傾向。
1分：明確重視承諾與專一，對曖昧行為或多重關係持否定態度。  
2分：有些輕浮語氣，但行為仍偏向穩定與尊重感情。  
3分：可能同時與多位異性互動，態度曖昧但不明確表露。  
4分：明顯享受曖昧與多重關係，未展現穩定或專一傾向。  
5分：言談中充滿炫耀、輕浮與狩獵心態，視感情為遊戲。
---

**請分析這段對話：**

{MESSAGES}"""

def get_eval_prompt(messages):
    conversation = ""
    for message in messages:
        if message['role'] == 'assistant':
            conversation += f"【朋友A】：{message['content']}\n"
        else:
            conversation += f"【朋友B】：{message['content']}\n"

    return love_struck_prompt_template.format(
        MESSAGES=conversation
    )


classify_prompt_template = """你是一位戀愛人格分析師，請根據以下一段對話（朋友A 提問，朋友B 回答），判斷朋友B 在這段對話中展現出哪一種戀愛人格傾向。請從以下四種類型中選擇最符合的，並簡要說明判斷依據。

---

### 👤 四種戀愛人格類型：

**A. 安全型（泰迪熊系戀人）**  
- 特徵：冷靜、真誠、擅長溝通、具包容力、願意解決問題  
- 關鍵詞：直接、坦誠、信任、理解、包容  
- 範例語氣：「我覺得我們應該好好聊聊，看彼此的想法能不能磨合。」

**B. 焦慮型（黏黏系戀人）**  
- 特徵：容易擔心被忽略、渴望肯定、害怕失去、過度在意對方  
- 關鍵詞：擔心、害怕失去、焦慮、不安、懷疑自己  
- 範例語氣：「我是不是又做錯什麼？他不理我是不是不愛我了？」

**C. 逃避型（刺蝟系戀人／高冷狐）**  
- 特徵：抗拒情緒交流、保持距離、冷淡、逃避問題  
- 關鍵詞：無所謂、冷漠、漠視、拖延、忽略  
- 範例語氣：「沒什麼好說的，反正也就這樣，懶得解釋。」

**D. 恐懼型（黑洞系戀人）**  
- 特徵：內心矛盾、自我懷疑、逃避情感、擔心受傷、主動斷聯  
- 關鍵詞：害怕、拒絕、逃避、退縮、抗拒  
- 範例語氣：「我覺得我根本沒辦法好好談感情，還是離開比較好。」

---

### 📤 請依照以下格式回覆：

- 判斷人格類型：A / B / C / D  

---

**請分析這段對話：**

{MESSAGES}"""

def get_classify_personality_prompt(messages):
    conversation = ""
    for message in messages:
        if message['role'] == 'assistant':
            conversation += f"【朋友A】：{message['content']}\n"
        else:
            conversation += f"【朋友B】：{message['content']}\n"
            
    return classify_prompt_template.format(MESSAGES=conversation)